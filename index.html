<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 提示词 - 风格预设库</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav class="app-nav">
        <a href="index.html" class="nav-link active">📚 风格预设库</a>
        <a href="generator.html" class="nav-link">🎲 随机生成器</a>
        
        <div style="margin-left: auto;">
            <button class="ctrl-btn danger" onclick="handleSignOut()" style="font-size: 0.9rem; padding: 5px 10px; margin-top: 5px;">
                🚪 登出
            </button>
        </div>
    </nav>

    <div class="page-container">
        <h1> 关键词一键复制</h1>
        
        <div class="preset-grid">
            <div class="preset-card safe" onclick="copyPreset('safe')">
                <span class="icon">🛡️</span>
                <span class="label">安全/时尚风格</span>
            </div>

            <div class="preset-card normal" onclick="copyPreset('normal')">
                <span class="icon">⚖️</span>
                <span class="label">标准/通用风格</span>
            </div>

            <div class="preset-card danger" onclick="copyPreset('danger')">
                <span class="icon">⚠️</span>
                <span class="label">进阶/特殊风格</span>
            </div>
            
            <div class="preset-card extreme" onclick="copyPreset('extreme_danger')"> 
                <span class="icon">💀</span>
                <span class="label">高风险/重度风格</span>
            </div>
        </div>

        <div class="divider">
            <span>📂 常用指令文档整理</span>
        </div>

        <div class="preset-grid">
            
            <div class="preset-card doc" onclick="openCollection('driver')">
                <span class="icon">🚌</span>
                <span class="label">老司机合集</span>
            </div>

            <div class="preset-card doc" onclick="openCollection('writing')">
                <span class="icon">✍️</span>
                <span class="label">写作指令合集</span>
            </div>

            <div class="preset-card doc" onclick="openCollection('character')">
                <span class="icon">👤</span>
                <span class="label">人物设定合集</span>
            </div>
            
            <div class="preset-card doc" onclick="openCollection('clothing')">
                <span class="icon">👗</span>
                <span class="label">服装设定合集</span>
            </div>
            
            <div class="preset-card doc" onclick="copyPreset('ai_fix')">
                <span class="icon">🚑</span>
                <span class="label">AI抽风矫正</span>
            </div>

            <div class="preset-card doc" onclick="copyPreset('paper')">
                <span class="icon">🎓</span>
                <span class="label">论文提示词</span>
            </div>

            <div class="preset-card doc" onclick="copyPreset('story_immersive')">
                <span class="icon">🎭</span>
                <span class="label">沉浸式剧情</span>
            </div>

            <div class="preset-card doc" onclick="copyPreset('story_idea')">
                <span class="icon">💡</span>
                <span class="label">故事灵感</span>
            </div>

            <div class="preset-card doc" onclick="copyPreset('art_ref')">
                <span class="icon">🎨</span>
                <span class="label">画图参考</span>
            </div>

            <div class="preset-card doc" onclick="copyPreset('quality')">
                <span class="icon">💎</span>
                <span class="label">提升输出质量</span>
            </div>

            <div class="preset-card doc" onclick="copyPreset('xhs')">
                <span class="icon">📕</span>
                <span class="label">小红书文案</span>
            </div>

            <div class="preset-card doc" onclick="copyPreset('english')">
                <span class="icon">🔤</span>
                <span class="label">英语单词</span>
            </div>

        </div>

        <p class="preset-hint">👆 点击上方卡片即可将对应风格的 Prompt 模板复制到剪贴板</p>
    </div>

    <div class="modal-overlay" id="collectionModal">
        <div class="modal collection-modal-content">
            <div class="modal-header">
                <h2 id="collectionTitle">📂 合集名称</h2>
                <button class="close-btn" onclick="closeCollection()">×</button>
            </div>
            <p style="color:#94a3b8; margin-bottom:15px; font-size:0.9rem;">点击下方具体项目即可复制</p>
            
            <div id="collectionList" class="collection-grid"></div>
        </div>
    </div>

    <div id="toast" class="toast">复制成功！</div>

    <script src="database.js"></script>
    <script src="data/init.js"></script>
    <script src="data/styles.js"></script>
    <script src="data/writing.js"></script>
    <script src="data/driver.js"></script>
    <script src="data/docs.js"></script>
    <script src="data/character.js"></script>
    <script src="data/clothing.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>

    <script>
        // Supabase 配置常量
        const SUPABASE_URL = 'https://mjmpvgyyeqalcocuizwb.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1qbXB2Z3l5ZXFhbGNvY3VpendiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4NzU1MzcsImV4cCI6MjA4MTQ1MTUzN30.M8S9zElBiuvVaDWTeiwRN0YeTsDqrlfzNVvCzX8-9sQ';
        const LOGIN_PATH = '/login.html';

        // 初始化 Supabase 客户端用于登出，使用唯一变量名避免冲突
        const supabaseAuthClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // 登出处理函数
        async function handleSignOut() {
            if (confirm('确定要登出吗？')) {
                const { error } = await supabaseAuthClient.auth.signOut();
                if (error) {
                    alert('登出失败：' + error.message);
                } else {
                    // 登出成功后重定向到登录页
                    window.location.href = LOGIN_PATH;
                }
            }
        }
    </script>
</body>
</html>